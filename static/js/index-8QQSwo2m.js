import{d as I,az as S,$ as T,aY as q,r as l,H as w,aZ as x,A as U,u as p,i as d,x as g,a_ as _,w as A,b2 as D,aR as M,a$ as O,aJ as P,aI as k,b0 as R,b1 as j}from"./index-CpafBiW4.js";import{i as H,p as N}from"./vue3-sfc-loader.esm-PKBrW54u.js";import{E as z}from"./index-DtyQLxZ-.js";import"./sortable.esm-C0-Qcoum.js";const G=I({name:"plugins",__name:"index",setup(F){const c=S(),y=T(),n=y.path.split("/")[1],C=(e,o,s,m)=>(s={baseURL:_()+"/"+n,...s},D.request(e,o,s,m)),$=q().accessToken,u=l(""),h=l(!0),b={vue:j,"plus-pro-components":N,"element-plus":z,echarts:R,"@message":k,"@addDialog":P,"@pureadmin/utils":O,iconify:M},E=Object.keys(c.code[n].components).length,r=l(0),v=(e,o)=>new Promise((s,m)=>{H(e,{getFile:t=>c.code[n][o][t.replace(/.vue$/,"")],moduleCache:b,addStyle(t){const f=`${n}-vue-styles`;let a=document.getElementById(f);if(a)a.textContent=t;else{a=Object.assign(document.createElement("style"),{id:f,textContent:t});const B=document.head.getElementsByTagName("style")[0]||null;document.head.insertBefore(a,B)}}}).then(t=>{r.value++,s(t)}).catch(t=>{u.value=`${e} 加载失败: ${t.message}`,i.value&&k(`${e} 出现错误: ${t.message}`,{type:"error",customClass:"el"}),m(t)})});(async()=>{for(const e in c.code[n].components)try{await v(`${e}.vue`,"components")}catch{return}})();const i=l(null);return w(r,()=>{r.value===E&&v(`${y.name.toString().split("/")[1]}.vue`,"main").then(e=>{h.value=!1,i.value=e})}),x((e,o,s)=>(o.$options.__name,!1)),(e,o)=>{const s=U("el-result");return u.value?(d(),p(s,{key:0,icon:"error",style:{height:"70vh"},title:"加载错误","sub-title":u.value},null,8,["sub-title"])):h.value?(d(),p(s,{key:1,style:{height:"70vh"},icon:"info",title:"加载中"})):(d(),p(A(i.value),{key:2,baseUrl:g(_),pluginName:g(n),request:C,accessToken:g($)},null,8,["baseUrl","pluginName","accessToken"]))}}});export{G as default};
