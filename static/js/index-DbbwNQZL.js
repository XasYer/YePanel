import{b as H,c as T}from"./system-BhlZrbHj.js";import{d as E,r as _,A as n,V as I,u,i as c,M as s,v as r,D as S,j as h,C as W,g as x,F as b,q as L,aI as j}from"./index-CpafBiW4.js";import{C as q}from"./ansi_to_html-DlaCULag.js";const y={class:"flex-c"},K=["innerHTML"],G=E({__name:"index",setup(O){const C=new q,d=_([]),V={MARK:"#999999",WARN:"#ffaa00",ERRO:"#ff0000"},w=t=>{k()},p=_(!1),f=_([]),m=_("");H().then(t=>{f.value=t.data.reverse()});const k=()=>{p.value=!0,T(m.value).then(t=>{if(t.success){let e="";const l=t.data.split(`
`).reduce((i,a)=>(a.startsWith("[")?(e&&i.push(g(e)),e=a):e?e+=`
`+a:e=a,i),[]);e&&l.push(g(e)),d.value=l}else j("获取日志失败: "+t.message,{type:"error",customClass:"el"});p.value=!1})},g=t=>{const e=/^\[(.*?)\]\[(.*?)\]([\s\S]*)/,l=t.match(e);return l?{timestamp:l[1],color:V[l[2]],content:C.toHtml(l[3].replace(/\r$/,"").replace(/\n|\r/g,"<br/>").replace(/\s|\t/g,"&nbsp;&nbsp;")).replace(/#00A/g,"#4169e1").replace(/#FFF/g,"#606266").replace("<br/><br/>","<br/>")}:{}};return(t,e)=>{const l=n("el-text"),i=n("el-option"),a=n("el-select"),v=n("el-col"),F=n("el-timeline-item"),A=n("el-timeline"),B=n("el-scrollbar"),D=n("el-row"),M=n("el-card"),N=I("loading");return c(),u(M,null,{default:s(()=>[r(D,{gutter:20},{default:s(()=>[r(v,{xs:24,lg:5,class:"mb-[10px]"},{default:s(()=>[h("div",y,[r(l,{class:"w-[60px]"},{default:s(()=>[W("数据源")]),_:1}),r(a,{modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=o=>m.value=o),placeholder:"",onChange:w},{default:s(()=>[(c(!0),x(b,null,L(f.value,o=>(c(),u(i,{key:o,label:o,value:o},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1}),S((c(),u(v,{span:24},{default:s(()=>[r(B,{height:"600px"},{default:s(()=>[r(A,{class:"pl-[10px]"},{default:s(()=>[(c(!0),x(b,null,L(d.value,(o,R)=>(c(),u(F,{key:R,color:o.color,timestamp:o.timestamp},{default:s(()=>[h("div",{innerHTML:o.content},null,8,K)]),_:2},1032,["color","timestamp"]))),128))]),_:1})]),_:1})]),_:1})),[[N,p.value]])]),_:1})]),_:1})}}});export{G as default};
