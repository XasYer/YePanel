import{o as B,T as N}from"./index-glDPGLTR.js";import{j as R}from"./index-BkB1o4-I.js";import{d as S,r as _,A as i,g as j,i as m,j as l,v as a,u as y,M as r,x as d,aR as v,C as k,F as D,aI as u,bk as M,ae as U,af as E,_ as F}from"./index-CpafBiW4.js";import{b as K}from"./database-LwlVviPM.js";const x=n=>(U("data-v-4cfba4da"),n=n(),E(),n),O={class:"mb-[10px]"},T={class:"flex"},W=x(()=>l("div",{class:"prepend"},"key:",-1)),$={class:"mb-[10px]"},z={class:"flex"},A=x(()=>l("div",{class:"prepend"},"过期时间:",-1)),H=S({__name:"codeMirror",props:{data:{default:()=>({key:"",value:"",expire:-1,db:"0"})}},setup(n,{expose:h}){const b=[R(),B],e=_(n.data),g=()=>{e.value.key&&K(e.value.key,e.value.db).then(s=>{s.success?s.data.expire===-2?u("该key可用",{customClass:"el",type:"success"}):u("该key已存在",{customClass:"el",type:"warning"}):u(`查询失败: ${s.message}`,{customClass:"el",type:"error"})})},c=_(!1),C=()=>{e.value.key+=M(),c.value=!0},V=()=>{e.value.key=e.value.key.slice(0,-32),c.value=!1};return h({getData:()=>({key:e.value.key,value:e.value.value,expire:e.value.expire}),checkCode:()=>{if(e.value.value.startsWith("{")||e.value.value.startsWith("["))try{JSON.parse(e.value.value)}catch(s){return u(s.message,{customClass:"el",type:"error"}),!1}return e.value.key?!0:(u("请输入key",{customClass:"el",type:"error"}),!1)}}),(s,t)=>{const I=i("el-input"),p=i("el-button"),f=i("el-text"),w=i("el-input-number");return m(),j(D,null,[l("div",O,[l("div",T,[W,a(I,{modelValue:e.value.key,"onUpdate:modelValue":t[0]||(t[0]=o=>e.value.key=o),placeholder:"key",onInput:t[1]||(t[1]=o=>c.value=!1)},null,8,["modelValue"]),a(p,{class:"ml-[10px]",onClick:g},{default:r(()=>[a(d(v),{icon:"material-symbols:frame-inspect",width:20,height:20})]),_:1}),c.value?(m(),y(p,{key:0,onClick:V},{default:r(()=>[a(d(v),{icon:"carbon:reset",width:20,height:20})]),_:1})):(m(),y(p,{key:1,onClick:C},{default:r(()=>[a(d(v),{icon:"mingcute:random-fill",width:20,height:20})]),_:1}))]),a(f,{style:{color:"#909399"}},{default:r(()=>[k("会覆盖旧的值")]),_:1})]),l("div",$,[l("div",z,[A,a(w,{modelValue:e.value.expire,"onUpdate:modelValue":t[2]||(t[2]=o=>e.value.expire=o),placeholder:"key"},null,8,["modelValue"])]),a(f,{style:{color:"#909399"}},{default:r(()=>[k("-1为不过期,单位秒")]),_:1})]),a(d(N),{modelValue:e.value.value,"onUpdate:modelValue":t[3]||(t[3]=o=>e.value.value=o),placeholder:"请输入数据...",style:{maxHeight:"500px",marginBottom:"20px"},autofocus:!0,"indent-with-tab":!0,"tab-size":2,extensions:b},null,8,["modelValue"])],64)}}}),Y=F(H,[["__scopeId","data-v-4cfba4da"]]);export{Y as default};
