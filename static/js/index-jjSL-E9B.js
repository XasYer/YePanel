import{d as C,V as Z,D as q,h as E,b as S,r as I,a_ as U,$ as L,o as $,e as A,g as D,j as d,x as e,v as t,S as N,M as a,aE as P,b9 as T,J as H,a8 as F,aI as B,A as f,ae as z,af as j,i as G,y as J,C as Y,_ as K}from"./index-CpafBiW4.js";import{h as O,c as W,b as X,g as ee,f as oe,u as y}from"./dark-BusIYaih.js";const g=C({name:"Motion",props:{delay:{type:Number,default:50}},render(){const{delay:i}=this,u=Z("motion");return q(E("div",{},{default:()=>[this.$slots.default()]}),[[u,{initial:{opacity:0,y:100},enter:{opacity:1,y:0,transition:{delay:i}}}]])}}),te=S({password:[{validator:(i,u,s)=>{u===""?s(new Error("请输入密码")):u.length<6?s(new Error("密码应为6位字符以上")):s()},trigger:"blur"}]}),ae="/YePanel/static/png/bg-BbeGHte5.png",se={width:24,height:24,body:'<path fill="currentColor" d="M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"/>'},le={width:24,height:24,body:'<path fill="currentColor" d="M20 22H4v-2a5 5 0 0 1 5-5h6a5 5 0 0 1 5 5v2Zm-8-9a6 6 0 1 1 0-12a6 6 0 0 1 0 12Z"/>'},ne={width:24,height:24,body:'<path fill="currentColor" d="m13.06 8.11l1.415 1.415a7 7 0 0 1 0 9.9l-.354.353a7 7 0 1 1-9.9-9.9l1.415 1.415a5 5 0 0 0 7.07 7.07l.354-.353a5 5 0 0 0 0-7.07l-1.414-1.415L13.06 8.11Zm6.718 6.011l-1.414-1.414a5 5 0 0 0-7.071-7.071l-.354.353a5 5 0 0 0 0 7.071l1.414 1.415l-1.414 1.414l-1.414-1.414a7 7 0 0 1 0-9.9l.353-.353a7 7 0 0 1 9.9 9.9Z"/>'},re=i=>(z("data-v-436e7b07"),i=i(),j(),i),ie={class:"select-none"},de=["src"],ue={class:"flex-c absolute right-5 top-3"},ce={class:"login-container"},pe=re(()=>d("div",{class:"img"},null,-1)),me={class:"login-box"},fe={class:"login-form"},ge={class:"outline-none"},_e=C({name:"Login",__name:"index",setup(i){const u=H(),s=L(),_=I(!1),h=I(),{initStorage:Q}=O();Q();const{dataTheme:v,dataThemeChange:w}=W();w();const{title:k}=X(),l=S({username:localStorage.getItem("QQBotUsername")||"",password:localStorage.getItem("QQBotPassword")||"",baseUrl:U()}),b=async n=>{n&&await n.validate((o,c)=>{if(o)V();else return c})},V=({username:n,password:o,baseUrl:c}=l,m=!0)=>{_.value=!0,P().loginByUsername({username:n,password:o,baseUrl:c}).then(p=>{if(p.success)return T().then(()=>{u.push(F(!0).path).then(()=>{B("登录成功",{type:"success"}),m&&(localStorage.setItem("QQBotUsername",n),localStorage.setItem("QQBotPassword",o)),localStorage.setItem("QQBotBaseUrl",c)})});B(p.message,{type:"error"})}).finally(()=>_.value=!1)};s.query.key&&V({username:s.query.key,password:"",baseUrl:s.query.api?`http://${s.query.api}`:U()},!1);function x({code:n}){n==="Enter"&&b(h.value)}return $(()=>{window.document.addEventListener("keypress",x)}),A(()=>{window.document.removeEventListener("keypress",x)}),(n,o)=>{const c=f("el-switch"),m=f("el-input"),p=f("el-form-item"),R=f("el-button"),M=f("el-form");return G(),D("div",ie,[d("img",{src:e(ae),class:"wave"},null,8,de),d("div",ue,[t(c,{modelValue:e(v),"onUpdate:modelValue":o[0]||(o[0]=r=>N(v)?v.value=r:null),"inline-prompt":"","active-icon":e(oe),"inactive-icon":e(ee),onChange:e(w)},null,8,["modelValue","active-icon","inactive-icon","onChange"])]),d("div",ce,[pe,d("div",me,[d("div",fe,[t(e(g),null,{default:a(()=>[d("h2",ge,J(e(k)),1)]),_:1}),t(M,{ref_key:"ruleFormRef",ref:h,model:l,rules:e(te),size:"large"},{default:a(()=>[t(e(g),{delay:100},{default:a(()=>[t(p,{rules:[{required:!0,message:"请输入账号",trigger:"blur"}],prop:"username"},{default:a(()=>[t(m,{modelValue:l.username,"onUpdate:modelValue":o[1]||(o[1]=r=>l.username=r),clearable:"",placeholder:"账号","prefix-icon":e(y)(e(le))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(e(g),{delay:150},{default:a(()=>[t(p,{prop:"password"},{default:a(()=>[t(m,{modelValue:l.password,"onUpdate:modelValue":o[2]||(o[2]=r=>l.password=r),clearable:"","show-password":"",placeholder:"密码","prefix-icon":e(y)(e(se))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(e(g),{delay:100},{default:a(()=>[t(p,{rules:[{required:!0,message:"后端API地址不能为空",trigger:"blur"}],prop:"baseUrl"},{default:a(()=>[t(m,{modelValue:l.baseUrl,"onUpdate:modelValue":o[3]||(o[3]=r=>l.baseUrl=r),clearable:"",placeholder:"API","prefix-icon":e(y)(e(ne))},null,8,["modelValue","prefix-icon"])]),_:1})]),_:1}),t(e(g),{delay:250},{default:a(()=>[t(R,{class:"w-full mt-4",size:"default",type:"primary",loading:_.value,onClick:o[4]||(o[4]=r=>b(h.value))},{default:a(()=>[Y(" 登录 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])])])}}}),ye=K(_e,[["__scopeId","data-v-436e7b07"]]);export{ye as default};
